{"version":3,"file":"util.js","sourceRoot":"","sources":["../../../src/util.ts"],"names":[],"mappings":";;;AAAA,0CAA4E;AAC5E,mCAAiD;AAEjD,MAAa,UAAU;IAIrB,YACU,KAGP;QAHD;;;;mBAAQ,KAAK;WAGZ;QAPH;;;;mBAAiB,IAAA,cAAQ,GAAE;WAAC;QAC5B;;;;mBAAY,IAAA,cAAQ,GAAE;WAAC;IAOpB,CAAC;IAEJ,MAAM,CAAC,OAAe;QACpB,IAAI,CAAC,cAAc,GAAG,IAAA,eAAS,EAAC,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC;QACxD,MAAM,OAAO,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC;QACnE,IAAI,CAAC,SAAS,GAAG,IAAA,eAAS,EAAC,IAAI,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QAEpD,MAAM,MAAM,GAAG,IAAI,eAAS,CAAC;YAC3B,cAAc,EAAE,IAAI,CAAC,cAAc;YACnC,SAAS,EAAE,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;YACjC,WAAW,EAAE,EAAE;YACf,SAAS,EAAE,IAAI;YACf,MAAM,EAAE,KAAK;YACb,OAAO,EAAE,KAAK;SACf,CAAC,CAAC;QACH,MAAM,GAAG,GAAG,IAAI,eAAS,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;QAC3C,OAAO,GAAG,CAAC;IACb,CAAC;CACF;AA3BD,gCA2BC","sourcesContent":["import { random16, random32, uint16Add, uint32Add } from \"../../common/src\";\nimport { RtpHeader, RtpPacket } from \"./rtp/rtp\";\n\nexport class RtpBuilder {\n  sequenceNumber = random16();\n  timestamp = random32();\n\n  constructor(\n    private props: {\n      between: number;\n      clockRate: number;\n    },\n  ) {}\n\n  create(payload: Buffer) {\n    this.sequenceNumber = uint16Add(this.sequenceNumber, 1);\n    const elapsed = (this.props.between * this.props.clockRate) / 1000;\n    this.timestamp = uint32Add(this.timestamp, elapsed);\n\n    const header = new RtpHeader({\n      sequenceNumber: this.sequenceNumber,\n      timestamp: Number(this.timestamp),\n      payloadType: 96,\n      extension: true,\n      marker: false,\n      padding: false,\n    });\n    const rtp = new RtpPacket(header, payload);\n    return rtp;\n  }\n}\n"]}