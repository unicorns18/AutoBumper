{"version":3,"file":"muteCallback.js","sourceRoot":"","sources":["../../../../../src/extra/processor/muteCallback.ts"],"names":[],"mappings":";;;AACA,iCAA0E;AAE1E,MAAa,YACX,SAAQ,sBAAe;IAMvB,YAAY,KAAuD;QACjE,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE;YACV,IAAI,IAAI,CAAC,EAAE,EAAE,CAAC;gBACZ,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YACb,CAAC;QACH,CAAC,EAAE,KAAK,CAAC,CAAC;QARJ;;;;;WAAiC;QACzC;;;;;WAAwB;QAUxB;;;;mBAAO,CAAC,EAA+B,EAAE,UAAuB,EAAE,EAAE;gBAClE,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;gBACb,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;gBAC7B,OAAO,IAAI,CAAC;YACd,CAAC;WAAC;QAEF;;;;mBAAQ,CAAC,KAAgB,EAAE,EAAE;gBAC3B,KAAK,MAAM,MAAM,IAAI,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,EAAE,CAAC;oBAC9C,IAAI,IAAI,CAAC,EAAE,EAAE,CAAC;wBACZ,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;oBAClB,CAAC;gBACH,CAAC;YACH,CAAC;WAAC;QAEF;;;;mBAAU,GAAG,EAAE;gBACb,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC;oBACpB,IAAI,CAAC,UAAU,EAAE,CAAC;oBAClB,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;gBAC9B,CAAC;gBACD,IAAI,CAAC,EAAE,GAAG,SAAS,CAAC;YACtB,CAAC;WAAC;IAtBF,CAAC;CAuBF;AApCD,oCAoCC","sourcesContent":["import type { SimpleProcessorCallback } from \"./interface\";\nimport { MuteHandlerBase, type MuteInput, type MuteOutput } from \"./mute\";\n\nexport class MuteCallback\n  extends MuteHandlerBase\n  implements SimpleProcessorCallback<MuteInput, MuteOutput>\n{\n  private cb?: (input: MuteOutput) => void;\n  destructor?: () => void;\n\n  constructor(props: ConstructorParameters<typeof MuteHandlerBase>[1]) {\n    super((o) => {\n      if (this.cb) {\n        this.cb(o);\n      }\n    }, props);\n  }\n\n  pipe = (cb: (input: MuteOutput) => void, destructor?: () => void) => {\n    this.cb = cb;\n    this.destructor = destructor;\n    return this;\n  };\n\n  input = (input: MuteInput) => {\n    for (const output of this.processInput(input)) {\n      if (this.cb) {\n        this.cb(output);\n      }\n    }\n  };\n\n  destroy = () => {\n    if (this.destructor) {\n      this.destructor();\n      this.destructor = undefined;\n    }\n    this.cb = undefined;\n  };\n}\n"]}